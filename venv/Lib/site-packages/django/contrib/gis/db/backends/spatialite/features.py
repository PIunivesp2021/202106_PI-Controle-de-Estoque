from django.contrib.gis.db.backends.base.features import BaseSpatialFeatures
from django.db.backends.sqlite3.features import (
    DatabaseFeatures as SQLiteDatabaseFeatures,
)
from django.utils.functional import cached_property


class DatabaseFeatures(BaseSpatialFeatures, SQLiteDatabaseFeatures):
    can_alter_geometry_field = False  # Not implemented
    supports_3d_storage = True

    @cached_property
    def supports_area_geodetic(self):
<<<<<<< HEAD
        return bool(self.connection.ops.lwgeom_version())
=======
        return bool(self.connection.ops.geom_lib_version())
>>>>>>> 7d5f087c4e99aa85f4ff913899c3075425769d76

    @cached_property
    def django_test_skips(self):
        skips = super().django_test_skips
<<<<<<< HEAD
        skips.update({
            "SpatiaLite doesn't support distance lookups with Distance objects.": {
                'gis_tests.geogapp.tests.GeographyTest.test02_distance_lookup',
            },
        })
=======
        skips.update(
            {
                "SpatiaLite doesn't support distance lookups with Distance objects.": {
                    "gis_tests.geogapp.tests.GeographyTest.test02_distance_lookup",
                },
            }
        )
>>>>>>> 7d5f087c4e99aa85f4ff913899c3075425769d76
        return skips
